apply plugin: ChangeVersion
allprojects {
    apply plugin: 'java'
    apply plugin: 'war'
}

repositories {
    mavenCentral()
}

def jarProjects = [project('admin'), project('services'), project('utils')]

jar {
    from {
        jarProjects.collect { it.sourceSets.main.output }
    }
}

def warProjects = [project('web'), project('services'), project('utils')]

war {
    from {
        warProjects.collect { it.sourceSets.main.output }
    }
}

/*task writeVersionProperties {
    ant.propertyfile(file: "gradle.properties") {
        entry(key: "minorVersion",
                value: version)
    }
}
build.finalizedBy(writeVersionProperties)*/

subprojects {
    sourceCompatibility = 1.11
    targetCompatibility = 1.11

    repositories {
        mavenCentral()
    }

    dependencies {
        testImplementation('junit:junit:4.13.2')
    }

    test {
        testLogging {
            events "passed", "skipped", "failed"
        }
    }
}
